(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-071a"],{AFjm:function(t,e,n){"use strict";var a=n("lYCU");n.n(a).a},E8gZ:function(t,e,n){var a=n("jmDH"),r=n("w6GO"),i=n("NsO/"),s=n("NV0k").f;t.exports=function(t){return function(e){for(var n,o=i(e),u=r(o),c=u.length,l=0,p=[];c>l;)n=u[l++],a&&!s.call(o,n)||p.push(t?[n,o[n]]:o[n]);return p}}},J6j7:function(t,e,n){"use strict";n.r(e);var a=n("14Xm"),r=n.n(a),i=n("QbLZ"),s=n.n(i),o=n("sk9p"),u=n.n(o),c=n("oF3Q"),l=n.n(c),p=n("D3Ub"),d=n.n(p),f=n("YEIV"),h=n.n(f),m=n("LtZ2"),b={components:{},props:{},data:function(){var t;return t={tableKey:0,listLoading:!0,tableData:[],spanArr:[],position:0,tableKeys:[]},h()(t,"tableKey",0),h()(t,"list",[]),h()(t,"total",0),h()(t,"listQuery",{page:1,limit:20,importance:void 0,title:void 0,type:void 0,sort:"+id"}),t},watch:{},computed:{},methods:{getList:function(){var t=this;return d()(r.a.mark(function e(){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.listLoading=!0,t.tableKeys=[{key:"id",width:150},{key:"description",width:"auto",align:"left"},{key:"type",width:"auto"},{key:"nodes",width:"auto"}],e.next=4,Object(m.b)();case 4:n=e.sent,a=[],n.node.nodes?n.node.nodes.map(function(t){var e=t.key.match(/\/([a-zA-Z0-9-_]+)$/)[1],n=parseInt(e),a=t.value.type,r=t.value.desc;return{id:n,realId:e,type:a,nodes:t.value.nodes,description:r}}).forEach(function(t){l()(t.nodes).forEach(function(e){var n=u()(e,2),r=n[0],i=n[1];t.nodes={},a=a.concat(s()({},t,{ip:r.split(":")[0],port:r.split(":")[1],weights:i}))})}):a=[],a.sort(function(t,e){return e.id-t.id}),t.tableData=a,t.rowspan(0,"id"),t.rowspan(1,"description"),t.rowspan(2,"type"),t.total=a.length,t.listLoading=!1;case 14:case"end":return e.stop()}},e,t)}))()},objectSpanMethod:function(t){t.row,t.column;var e=t.rowIndex,n=t.columnIndex;return 6===n?{rowspan:this.spanArr[0][e],colspan:this.spanArr[0][e]>0?1:0}:n<3?{rowspan:this.spanArr[0][e],colspan:this.spanArr[0][e]>0?1:0}:void 0},rowspan:function(t,e){var n=this;this.spanArr[t]=[],this.position=0,this.tableData.forEach(function(a,r){0===r?(n.spanArr[t].push(1),n.position=0):n.tableData[r][e]===n.tableData[r-1][e]?(n.spanArr[t][n.position]+=1,n.spanArr[t].push(0)):(n.spanArr[t].push(1),n.position=r)})},handleEdit:function(t){this.$router.push({name:"GatewayUpstreamEdit",params:{id:t.realId}})},handleCreate:function(){this.$router.push({name:"GatewayUpstreamCreate"})},handleRemove:function(t){var e=this;this.$confirm("此操作将永久删除该条数据, 是否继续?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(d()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(m.d)(t.realId);case 2:e.getList(),e.$message.success("Remove upstream "+t.id+" successfully!");case 4:case"end":return n.stop()}},n,e)}))).catch(function(){e.$message({type:"info",message:"已取消删除"})})}},created:function(){this.getList()},mounted:function(){}},v=(n("AFjm"),n("KHd+")),w=Object(v.a)(b,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-button",{on:{click:t.handleCreate}},[t._v("新增")])],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.tableData,"span-method":t.objectSpanMethod,border:"",fit:"","highlight-current-row":""}},[t._l(t.tableKeys,function(e,a){return n("el-table-column",{key:a,attrs:{label:e.key,prop:e.key,width:e.width,"class-name":"left"===e.align?"":"status-col",align:"center"}},["nodes"===e.key?[n("el-table-column",{attrs:{label:"IP/HOST",width:"auto",prop:"ip","class-name":"status-col"}}),t._v(" "),n("el-table-column",{attrs:{label:"Port",width:"auto",prop:"port","class-name":"status-col"}}),t._v(" "),n("el-table-column",{attrs:{label:"Weights",width:"auto",prop:"weights","class-name":"status-col"}})]:t._e()],2)}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleRemove(e.row)}}},[t._v("删除")]),t._v(" "),n("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(n){t.handleEdit(e.row)}}},[t._v("编辑")])]}}])})],2)],1)},[],!1,null,"48ea3ef3",null);w.options.__file="index.vue";e.default=w.exports},LtZ2:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"e",function(){return i}),n.d(e,"c",function(){return s}),n.d(e,"a",function(){return o}),n.d(e,"d",function(){return u});var a=n("t3Un");function r(t){return Object(a.a)({url:"/apisix/admin/upstreams",method:"GET",params:t})}var i=function(t,e){return Object(a.a)({url:"/apisix/admin/upstreams/"+t,method:"PUT",data:e})},s=function(t){return Object(a.a)({url:"/apisix/admin/upstreams/"+t,method:"GET"})},o=function(t){return Object(a.a)({url:"/apisix/admin/upstreams",method:"post",data:t})},u=function(t){return Object(a.a)({url:"/apisix/admin/upstreams/"+t,method:"DELETE"})}},lYCU:function(t,e,n){},nGDx:function(t,e,n){var a=n("Y7ZC"),r=n("E8gZ")(!0);a(a.S,"Object",{entries:function(t){return r(t)}})},oF3Q:function(t,e,n){t.exports={default:n("tgZa"),__esModule:!0}},tgZa:function(t,e,n){n("nGDx"),t.exports=n("WEpk").Object.entries}}]);
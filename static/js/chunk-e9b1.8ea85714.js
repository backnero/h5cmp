(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e9b1"],{"1D2j":function(e,t,r){},"5KXe":function(e,t,r){"use strict";var n=r("T247");r.n(n).a},Qo5I:function(e,t,r){"use strict";r.d(t,"g",function(){return o}),r.d(t,"h",function(){return i}),r.d(t,"a",function(){return a}),r.d(t,"b",function(){return s}),r.d(t,"f",function(){return c}),r.d(t,"c",function(){return u}),r.d(t,"d",function(){return l}),r.d(t,"e",function(){return d});var n=r("t3Un"),o=function(e){return Object(n.a)({url:"/cms/resources",method:"get",params:e})},i=function(e){return Object(n.a)({url:"/cms/resource/classifys/tree",method:"get",params:e})},a=function(e){return Object(n.a)({url:"/cms/resource",method:"post",data:e})},s=function(e){return Object(n.a)({url:"/cms/resource/classify",method:"post",data:e})},c=function(e){return Object(n.a)({url:"/cms/resource",method:"get",params:e})},u=function(e){return Object(n.a)({url:"/cms/resource/classify",method:"get",params:e})},l=function(e,t){return Object(n.a)({url:"/cms/resources/"+t,method:"delete",params:e})},d=function(e,t){return Object(n.a)({url:"/cms/resource/classifys/"+t,method:"delete",params:e})}},QqRN:function(e,t,r){"use strict";r.r(t);var n=r("14Xm"),o=r.n(n),i=r("D3Ub"),a=r.n(i),s=r("Qo5I"),c=r("d7cB"),u=r("Mz3J"),l=r("Tvau"),d=r("n7zn"),p=(r("Yfch"),{components:{Pagination:u.a,VSelect:l.a},props:{},data:function(){return{listLoading:!1,tableData:[],options:[],total:0,listQuery:{keyword:"",page:1,count:10,cid:[],sort:"desc",type:"article",cs:1,ts:1,as:1},resourcedata:[],resourceQuery:{keyword:"",page:1,count:10,sort:"",type:""},resourceLoading:!1,resourceDialogVisible:!1,resourcetotal:0,currentRow:null,resourceIds:[]}},watch:{},computed:{},methods:{getList:function(){var e=this;return a()(o.a.mark(function t(){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.listLoading=!0,e.tableKeys=d.a,t.next=4,Object(s.g)(e.listQuery);case 4:r=t.sent,e.tableData=r.data,e.total=r.meta.total||0,e.listLoading=!1;case 8:case"end":return t.stop()}},t,e)}))()},getTypes:function(){var e=this;return a()(o.a.mark(function t(){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.h)({type:e.listQuery.type});case 2:r=t.sent,e.options=r.data;case 4:case"end":return t.stop()}},t,e)}))()},created:function(){this.$router.push({name:"ContentArticleCreate"})},handleEdit:function(e){this.$router.push({name:"ContentArticleEdit",params:{id:e.id}})},handleRelease:function(e){this.resourceIds&&this.resourceIds.length>0?(this.getResources(),this.resourceDialogVisible=!0):this.$message({message:"警告哦，请选择一条您要发布的渠道！",type:"warning"})},getResources:function(){var e=this;return a()(o.a.mark(function t(){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.resourceLoading=!0,t.next=3,Object(c.b)(e.resourceQuery);case 3:r=t.sent,e.resourcedata=r.data,e.resourcetotal=r.meta.total,e.resourceLoading=!1;case 7:case"end":return t.stop()}},t,e)}))()},confirm:function(){var e=this;return a()(o.a.mark(function t(){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.currentRow){t.next=8;break}return r={channel_id:e.currentRow,resource_ids:e.resourceIds,resource_type:"article",type:"add"},t.next=4,Object(c.f)(r);case 4:e.$message({type:"success",message:"发布成功!"}),e.resourceDialogVisible=!1,t.next=9;break;case 8:e.$message({message:"警告哦，请选择一条您要发布的渠道！",type:"warning"});case 9:case"end":return t.stop()}},t,e)}))()},getRowkey:function(e){return e.id},SelectionChange:function(e){this.resourceIds=e.map(function(e){return e.id})},handleRemove:function(e){var t=this,r=this;this.$confirm("此操作将永久删除"+e.title+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(a()(o.a.mark(function n(){var i;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i={type:t.listQuery.type},n.next=3,Object(s.d)(i,e.id);case 3:r.getList(),r.$message({type:"success",message:"删除成功!"});case 5:case"end":return n.stop()}},n,t)}))).catch(function(){r.$message({type:"info",message:"已取消删除"})})},triggerClick:function(e){this.copy(e.url)},copy:function(e){var t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),t.style.display="none",document.body.removeChild(t),this.$notify({title:"复制成功",message:"已复制到剪切板",type:"success"})},emptytable:function(){this.currentRow=null},handleCurrentChange:function(e){e&&(this.currentRow=e.id)}},created:function(){this.getList(),this.getTypes()},mounted:function(){}}),f=(r("5KXe"),r("KHd+")),h=Object(f.a)(p,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"head-container"},[r("div",{staticClass:"left-wrapper"},[r("label",{staticClass:"item-label"},[e._v("文章类别")]),e._v(" "),r("div",{staticClass:"item-content"},[r("v-select",{attrs:{options:e.options},model:{value:e.listQuery.cid,callback:function(t){e.$set(e.listQuery,"cid",t)},expression:"listQuery.cid"}})],1),e._v(" "),r("div",{staticClass:"item-content"},[r("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.listQuery.keyword,callback:function(t){e.$set(e.listQuery,"keyword",t)},expression:"listQuery.keyword"}})],1),e._v(" "),r("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getList}},[e._v("搜索")])],1),e._v(" "),r("div",{staticClass:"right-wrapper"},[r("el-button",{attrs:{type:"primary"},on:{click:e.handleRelease}},[e._v("发布")]),e._v(" "),r("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.created}},[e._v("添加文章")])],1)]),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0,fit:"","highlight-current-row":"","header-cell-style":{background:"#f5f7fa"},"row-key":e.getRowkey},on:{"selection-change":e.SelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),e._l(e.tableKeys,function(t,n){return r("el-table-column",{key:n,attrs:{label:t.key,prop:t.prop,property:t.prop,width:t.width,align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return["description"===t.prop?r("span",[r("el-popover",{attrs:{placement:"top-start",width:"400",trigger:"click",content:n.row.description}},[r("el-button",{attrs:{slot:"reference"},slot:"reference"},[e._v("详情")])],1)],1):"author_info"===t.prop&&n.row.author_info?r("span",[e._v("\n          "+e._s(n.row.author_info.name)+"\n        ")]):"create_time"===t.prop?r("span",[e._v("\n          "+e._s(e._f("formatDate")(n.row.create_time,"yyyy-MM-dd hh:mm:ss"))+"\n        ")]):"classify_info"===t.prop&&n.row.classify_info?r("span",[e._v("\n          "+e._s(n.row.classify_info.title)+"\n        ")]):"thumb_info"===t.prop&&n.row.thumb_info?r("span",[r("el-image",{staticStyle:{width:"70px",height:"60px","border-radius":"5px",cursor:"pointer"},attrs:{src:n.row.thumb_info.url+"?imageView2/1/w/400/h/600/q/85"},on:{click:function(t){e.triggerClick(n.row.thumb_info)}}})],1):"tags"===t.prop&&n.row.tags?r("span",{staticClass:"tag-wrapper"},e._l(n.row.tags.split("|"),function(t){return r("el-tag",{key:t},[e._v("\n            "+e._s(t)+"\n          ")])})):r("span",[e._v(e._s(n.row[n.column.property]))])]}}])})}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(r){e.handleEdit(t.row)}}},[e._v("\n          编辑\n        ")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){e.handleRemove(t.row)}}},[e._v("\n          删除\n        ")])]}}])})],2),e._v(" "),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.count},on:{"update:page":function(t){e.$set(e.listQuery,"page",t)},"update:limit":function(t){e.$set(e.listQuery,"count",t)},pagination:e.getList}}),e._v(" "),r("el-dialog",{attrs:{title:"渠道",visible:e.resourceDialogVisible,width:"80%"},on:{"update:visible":function(t){e.resourceDialogVisible=t},close:e.emptytable}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.resourceLoading,expression:"resourceLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#f5f7fa"},border:"",fit:"","highlight-current-row":"",data:e.resourcedata},on:{"current-change":e.handleCurrentChange}},[r("el-table-column",{attrs:{prop:"id",label:"ID",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"title",label:"名称",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"description",label:"描述",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"创建时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.create_time,"yyyy-MM-dd hh:mm:ss")))]}}])})],1),e._v(" "),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.resourcetotal>0,expression:"resourcetotal > 0"}],attrs:{total:e.resourcetotal,page:e.resourceQuery.page,limit:e.resourceQuery.count},on:{"update:page":function(t){e.$set(e.resourceQuery,"page",t)},"update:limit":function(t){e.$set(e.resourceQuery,"count",t)},pagination:e.getResources}}),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.resourceDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v(" 确 定 ")])],1)],1)],1)},[],!1,null,"d8b7a40e",null);h.options.__file="list.vue";t.default=h.exports},T247:function(e,t,r){},Tvau:function(e,t,r){"use strict";var n={props:{value:{required:!0},disabled:{type:Boolean,default:!1},options:{type:Array,default:function(){return[]},required:!0},placeholder:{type:String}},model:{prop:"value"},data:function(){return{selectId:this.value}},watch:{value:function(e){this.selectId=e}},methods:{changeFn:function(){this.$emit("input",this.selectId)},handleSelect:function(e){e.target.parentElement.previousElementSibling.children[0].children[1].click(),this.$refs.cascader.dropDownVisible=!1}}},o=(r("iGDy"),r("KHd+")),i=Object(o.a)(n,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-cascader",{ref:"cascader",attrs:{disabled:e.disabled,placeholder:e.placeholder,props:{children:"childs",label:"title",value:"id",checkStrictly:!0,expandTrigger:"hover",emitPath:!1},options:e.options,"show-all-levels":!1,clearable:""},on:{change:e.changeFn},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var n=t.data;return[r("div",{staticClass:"select-item",domProps:{innerHTML:e._s(n.title)},on:{click:e.handleSelect}})]}}]),model:{value:e.selectId,callback:function(t){e.selectId=t},expression:"selectId"}})},[],!1,null,null,null);i.options.__file="index.vue";t.a=i.exports},Y5bG:function(e,t,r){"use strict";r.d(t,"a",function(){return o}),Math.easeInOutQuad=function(e,t,r,n){return(e/=n/2)<1?r/2*e*e+t:-r/2*(--e*(e-2)-1)+t};var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function o(e,t,r){var o=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,i=e-o,a=0;t=void 0===t?500:t;!function e(){a+=20,function(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}(Math.easeInOutQuad(a,o,i,t)),a<t?n(e):r&&"function"==typeof r&&r()}()}},d7cB:function(e,t,r){"use strict";r.d(t,"b",function(){return o}),r.d(t,"a",function(){return i}),r.d(t,"c",function(){return a}),r.d(t,"e",function(){return s}),r.d(t,"d",function(){return c}),r.d(t,"f",function(){return u});var n=r("t3Un"),o=function(e){return Object(n.a)({url:"cms/channels",method:"get",params:e})},i=function(e){return Object(n.a)({url:"cms/channel",method:"post",data:e})},a=function(e){return Object(n.a)({url:"cms/channel/"+e,method:"get"})},s=function(e){return Object(n.a)({url:"cms/channel/"+e,method:"delete"})},c=function(e,t){return Object(n.a)({url:"/cms/channel/resource/"+t,method:"get",params:e})},u=function(e){return Object(n.a)({url:"cms/channel/resources",method:"put",data:e})}},iGDy:function(e,t,r){"use strict";var n=r("1D2j");r.n(n).a},n7zn:function(e,t,r){"use strict";var n=[{key:"ID",prop:"id",width:"200"},{key:"文章名称",prop:"title",width:"200"},{key:"文章类别",prop:"classify_info",width:"auto"},{key:"文章简介",prop:"description",width:"100"},{key:"文章缩略图",prop:"thumb_info",width:"120"},{key:"作者",prop:"author_info",width:"150"},{key:"标签",prop:"tags",width:"350"},{key:"来源",prop:"source",width:"150"},{key:"添加时间",prop:"create_time",width:"200"}],o=[{key:"ID",prop:"id",width:"200"},{key:"音频名称",prop:"title",width:"200"},{key:"音频类别",prop:"classify_info",width:"auto"},{key:"音频简介",prop:"description",width:"100"},{key:"音频缩略图",prop:"thumb_info",width:"120"},{key:"url",prop:"url",width:"350"},{key:"标签",prop:"tags",width:"200"},{key:"时长",prop:"duration_time",width:"100"},{key:"来源",prop:"source",width:"150"},{key:"创建时间",prop:"create_time",width:"200"}],i=[{key:"ID",prop:"id",width:"200"},{key:"作者名称",prop:"name",width:"120"},{key:"作者类别",prop:"classify_info",width:"auto"},{key:"别名",prop:"alias",width:"100"},{key:"简介",prop:"introduction",width:"120"},{key:"出生日期",prop:"birthdate",width:"150"},{key:"出生地",prop:"native_place",width:"300"},{key:"代表作",prop:"opus",width:"150"},{key:"添加时间",prop:"create_time",width:"200"}],a=[{key:"ID",prop:"id",width:"auto"},{key:"图片名称",prop:"title",width:"auto"},{key:"描述",prop:"description",width:"auto"},{key:"缩略图",prop:"file_info",width:"auto"},{key:"图片类别",prop:"classify_info",width:"auto"},{key:"添加时间",prop:"create_time",width:"auto"}],s=[{key:"ID",prop:"id",width:"200"},{key:"视频名称",prop:"title",width:"200"},{key:"视频类别",prop:"classify_info",width:"auto"},{key:"视频简介",prop:"description",width:"100"},{key:"视频缩略图",prop:"thumb_info",width:"120"},{key:"url",prop:"url",width:"350"},{key:"标签",prop:"tags",width:"200"},{key:"时长",prop:"duration_time",width:"100"},{key:"来源",prop:"source",width:"150"},{key:"创建时间",prop:"create_time",width:"200"}];r.d(t,"a",function(){return n}),r.d(t,"b",function(){return o}),r.d(t,"c",function(){return i}),r.d(t,"d",function(){return a}),r.d(t,"e",function(){return s})}}]);
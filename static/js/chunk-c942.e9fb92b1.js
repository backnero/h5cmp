(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-c942"],{"+BuQ":function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"e",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return o}),n.d(t,"a",function(){return u});var r=n("t3Un");function i(e){return Object(r.a)({url:"/apisix/admin/routes",method:"GET",params:e})}var a=function(e,t){return Object(r.a)({url:"/apisix/admin/routes/"+e,method:"PUT",data:t})},s=function(e){return Object(r.a)({url:"/apisix/admin/routes/"+e,method:"GET"})},o=function(e){return Object(r.a)({url:"/apisix/admin/routes/"+e,method:"DELETE"})},u=function(e){return Object(r.a)({url:"/apisix/admin/routes",method:"POST",data:e})}},"3HYL":function(e,t,n){"use strict";n.r(t);var r=n("4d7F"),i=n.n(r),a=n("14Xm"),s=n.n(a),o=n("GQeE"),u=n.n(o),d=n("D3Ub"),c=n.n(d),l=n("+BuQ"),m=n("8gsd"),p=n("LtZ2"),f={components:{},props:{},data:function(){return{tableKey:0,list:[],total:0,listLoading:!0,listQuery:{page:1,limit:20,importance:void 0,title:void 0,type:void 0,sort:"+id",keyword:""},tableData:[],tableKeys:[]}},watch:{},computed:{},methods:{getList:function(){var e=this;return c()(s.a.mark(function t(){var n,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.listLoading=!0,e.tableKeys=[{key:"id",width:150},{key:"description",width:"auto",align:"left"},{key:"uri",width:"auto"},{key:"host",width:"auto"},{key:"remote_addr",width:"auto"},{key:"service",width:"auto"},{key:"upstream",width:"auto"},{key:"methods",width:200},{key:"plugins",width:"auto"}],t.next=4,Object(l.b)();case 4:return n=t.sent,r=void 0,r=n.node.nodes?n.node.nodes.map(function(){var t=c()(s.a.mark(function t(n){var r,i,a,o,d,c,l,f,h,v,w,y,b,k,g,x,L,j,C,E;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.key.match(/\/([a-zA-Z0-9-_]+)$/)[1],i=parseInt(r),a=n.value,o=a.uri,d=void 0===o?"":o,c=a.host,l=void 0===c?"":c,f=a.remote_addr,h=void 0===f?"":f,v=a.upstream_id,w=void 0===v?"":v,y=a.service_id,b=void 0===y?"":y,k=a.methods,g=void 0===k?[]:k,x=a.plugins,L=void 0===x?{}:x,j=a.desc,C=void 0===j?"":j,g=g.join(", "),n.value.uris&&(d=n.value.uris.join(", ")),n.value.hosts&&(l=n.value.hosts.join("\n ")),L=u()(L).join(", "),E=void 0,!b){e.next=12;break}return e.next=11,Object(m.c)(b);case 11:E=e.sent;case 12:if(!w){e.next=16;break}return e.next=15,Object(p.c)(w);case 15:E=e.sent;case 16:return e.abrupt("return",{id:i,realId:r,uri:d,host:l,remote_addr:h,service:b?E.node.value.desc:"",upstream:w?E.node.value.desc:"",methods:g,plugins:L,description:C});case 17:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}()):[],t.next=9,i.a.all(r);case 9:e.tableData=t.sent,e.total=r.length,e.listLoading=!1;case 12:case"end":return t.stop()}},t,e)}))()},handleRemove:function(e){var t=this;this.$confirm("此操作将永久删除该条数据, 是否继续?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(c()(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(l.d)(e.realId);case 2:t.getList(),t.$message.success("Remove router "+e.id+" successfully!");case 4:case"end":return n.stop()}},n,t)}))).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleCreate:function(){this.$router.push({name:"GatewayRoutesCreate"})},handleEdit:function(e){this.$router.push({name:"GatewayRoutesEdit",params:{id:e.realId}})}},created:function(){this.getList()},mounted:function(){}},h=(n("7k2E"),n("KHd+")),v=Object(h.a)(f,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"head"},[n("div",{staticClass:"left-wrapper"},[n("label",{staticClass:"item-label"},[e._v("关键字过滤")]),e._v(" "),n("div",{staticClass:"item-content",staticStyle:{width:"200px"}},[n("el-input",{attrs:{placeholder:"输入关键字过滤",clearable:""},model:{value:e.listQuery.keyword,callback:function(t){e.$set(e.listQuery,"keyword",t)},expression:"listQuery.keyword"}})],1)]),e._v(" "),n("div",{staticClass:"right-wrapper"},[n("el-button",{on:{click:e.handleCreate}},[e._v("新增")])],1)]),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.tableData.filter(function(t){return!e.listQuery.keyword||t.service.toLowerCase().includes(e.listQuery.keyword.toLowerCase())||t.upstream.toLowerCase().includes(e.listQuery.keyword.toLowerCase())||t.host.toLowerCase().includes(e.listQuery.keyword.toLowerCase())||t.methods.toLowerCase().includes(e.listQuery.keyword.toLowerCase())||t.description.toLowerCase().includes(e.listQuery.keyword.toLowerCase())||t.uri.toLowerCase().includes(e.listQuery.keyword.toLowerCase())}),border:!0,fit:"","highlight-current-row":"","header-cell-style":{background:"#f5f7fa"},"default-sort":{prop:"id",order:"descending"}}},[e._l(e.tableKeys,function(e,t){return n("el-table-column",{key:t,attrs:{label:e.key,prop:e.key,width:e.width,"class-name":"left"===e.align?"":"status-col",align:"center"}})}),e._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){e.handleRemove(t.row)}}},[e._v("删除")]),e._v(" "),n("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(n){e.handleEdit(t.row)}}},[e._v("编辑")])]}}])})],2)],1)},[],!1,null,"598511b1",null);v.options.__file="index.vue";t.default=v.exports},"7k2E":function(e,t,n){"use strict";var r=n("vJCm");n.n(r).a},"8gsd":function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"e",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return o}),n.d(t,"a",function(){return u});var r=n("t3Un");function i(e){return Object(r.a)({url:"/apisix/admin/services",method:"GET",params:e})}var a=function(e,t){return Object(r.a)({url:"/apisix/admin/services/"+e,method:"PUT",data:t})},s=function(e){return Object(r.a)({url:"/apisix/admin/services/"+e,method:"GET"})},o=function(e){return Object(r.a)({url:"/apisix/admin/services/"+e,method:"DELETE"})},u=function(e){return Object(r.a)({url:"/apisix/admin/services",method:"POST",data:e})}},LtZ2:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"e",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return o}),n.d(t,"d",function(){return u});var r=n("t3Un");function i(e){return Object(r.a)({url:"/apisix/admin/upstreams",method:"GET",params:e})}var a=function(e,t){return Object(r.a)({url:"/apisix/admin/upstreams/"+e,method:"PUT",data:t})},s=function(e){return Object(r.a)({url:"/apisix/admin/upstreams/"+e,method:"GET"})},o=function(e){return Object(r.a)({url:"/apisix/admin/upstreams",method:"post",data:e})},u=function(e){return Object(r.a)({url:"/apisix/admin/upstreams/"+e,method:"DELETE"})}},vJCm:function(e,t,n){}}]);
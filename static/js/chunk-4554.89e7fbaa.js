(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4554"],{"+kC8":function(t,e,n){"use strict";n.r(e);var a=n("14Xm"),r=n.n(a),o=n("D3Ub"),i=n.n(o),s=n("d7cB"),c={components:{Pagination:n("Mz3J").a},props:{},data:function(){return{dialogVisible:!1,listLoading:!1,tableData:[],total:0,listQuery:{keyword:"",page:1,count:10,sort:"desc"},form:{}}},watch:{},computed:{},methods:{getList:function(){var t=this;return i()(r.a.mark(function e(){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.listLoading=!0,e.next=3,Object(s.b)(t.listQuery);case 3:n=e.sent,t.tableData=n.data,t.total=n.meta.total||0,t.listLoading=!1;case 7:case"end":return e.stop()}},e,t)}))()},create:function(){var t=this;this.$refs.form.validate(function(){var e=i()(r.a.mark(function e(n){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,Object(s.a)(t.form);case 3:t.getList(),t.dialogVisible=!1,t.$message({type:"success",message:"添加成功!"});case 6:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}())},empty:function(){this.form={}},handleEdit:function(t){var e=this;return i()(r.a.mark(function n(){var a,o;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(s.c)(t.id);case 2:a=n.sent,o=a.data,e.form=o,e.dialogVisible=!0;case 6:case"end":return n.stop()}},n,e)}))()},handleRemove:function(t){var e=this;return i()(r.a.mark(function n(){var a;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a=e,e.$confirm("此操作将永久删除"+t.title+"渠道, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(i()(r.a.mark(function n(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.e)(t.id);case 2:a.getList(),a.$message({type:"success",message:"删除成功!"});case 4:case"end":return e.stop()}},n,e)}))).catch(function(){a.$message({type:"info",message:"已取消删除"})});case 2:case"end":return n.stop()}},n,e)}))()}},created:function(){this.getList()},mounted:function(){}},l=(n("b/Ne"),n("KHd+")),u=Object(l.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"head-container"},[n("div",{staticClass:"left-wrapper"},[n("label",{staticClass:"item-label"},[t._v("渠道名称")]),t._v(" "),n("div",{staticClass:"item-content"},[n("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.listQuery.keyword,callback:function(e){t.$set(t.listQuery,"keyword",e)},expression:"listQuery.keyword"}})],1),t._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getList}},[t._v("搜索")])],1),t._v(" "),n("div",{staticClass:"right-wrapper"},[n("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("添加渠道")])],1)]),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#f5f7fa"},border:"",fit:"","highlight-current-row":"",data:t.tableData}},[n("el-table-column",{attrs:{prop:"id",label:"ID",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"名称",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"description",label:"描述",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"resource",label:"资源",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:{name:"ContentResourceList",params:{id:e.row.id}}}},[t._v("查看全部资源")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"创建时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("formatDate")(e.row.create_time,"yyyy-MM-dd hh:mm:ss")))]}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(n){t.handleEdit(e.row)}}},[t._v("修改")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){t.handleRemove(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.count},on:{"update:page":function(e){t.$set(t.listQuery,"page",e)},"update:limit":function(e){t.$set(t.listQuery,"count",e)},pagination:t.getList}}),t._v(" "),n("el-dialog",{attrs:{title:"渠道",visible:t.dialogVisible,width:"25%"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.empty}},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"渠道名称",prop:"title",rules:[{required:!0,message:"渠道名称不能为空"}]}},[n("el-input",{attrs:{placeholder:"请输入渠道名称"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"渠道描述",prop:"description"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.create}},[t._v("确 定")])],1)],1)],1)},[],!1,null,"9a921e10",null);u.options.__file="index.vue";e.default=u.exports},Y5bG:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),Math.easeInOutQuad=function(t,e,n,a){return(t/=a/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e};var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};function r(t,e,n){var r=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,o=t-r,i=0;e=void 0===e?500:e;!function t(){i+=20,function(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}(Math.easeInOutQuad(i,r,o,e)),i<e?a(t):n&&"function"==typeof n&&n()}()}},"b/Ne":function(t,e,n){"use strict";var a=n("waTx");n.n(a).a},d7cB:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return i}),n.d(e,"e",function(){return s}),n.d(e,"d",function(){return c}),n.d(e,"f",function(){return l});var a=n("t3Un"),r=function(t){return Object(a.a)({url:"cms/channels",method:"get",params:t})},o=function(t){return Object(a.a)({url:"cms/channel",method:"post",data:t})},i=function(t){return Object(a.a)({url:"cms/channel/"+t,method:"get"})},s=function(t){return Object(a.a)({url:"cms/channel/"+t,method:"delete"})},c=function(t,e){return Object(a.a)({url:"/cms/channel/resource/"+e,method:"get",params:t})},l=function(t){return Object(a.a)({url:"cms/channel/resources",method:"put",data:t})}},waTx:function(t,e,n){}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1ead"],{"1D2j":function(t,e,n){},"5qhT":function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"f",function(){return r}),n.d(e,"b",function(){return a}),n.d(e,"i",function(){return l}),n.d(e,"e",function(){return s}),n.d(e,"g",function(){return c}),n.d(e,"d",function(){return u}),n.d(e,"j",function(){return d}),n.d(e,"l",function(){return f}),n.d(e,"a",function(){return p}),n.d(e,"h",function(){return m}),n.d(e,"m",function(){return h}),n.d(e,"k",function(){return b});var i=n("t3Un"),o=function(t){return Object(i.a)({url:"cms/books",method:"get",params:t})},r=function(t){return Object(i.a)({url:"cms/book",method:"get",params:t})},a=function(t){return Object(i.a)({url:"cms/book",method:"post",data:t})},l=function(t){return Object(i.a)({url:"cms/books/"+t,method:"delete"})},s=function(t){return Object(i.a)({url:"cms/book/chapterstree",method:"get",params:t})},c=function(t,e){return Object(i.a)({url:"cms/book/chapter/"+e,method:"get",params:t})},u=function(t){return Object(i.a)({url:"cms/book/chapter",method:"post",data:t})},d=function(t){return Object(i.a)({url:"cms/book/chapters/"+t,method:"delete"})},f=function(t){return Object(i.a)({url:"cms/book/chapter/season",method:"post",data:t})},p=function(){return Object(i.a)({url:"cms/book/classifys/tree",method:"get"})},m=function(t){return Object(i.a)({url:"cms/book/classify",method:"get",params:t})},h=function(t){return Object(i.a)({url:"cms/book/classify",method:"post",data:t})},b=function(t){return Object(i.a)({url:"cms/book/classifys/"+t,method:"delete"})}},"9ckS":function(t,e,n){"use strict";var i=n("doI3");n.n(i).a},EiWX:function(t,e,n){"use strict";var i=n("NdzV");n.n(i).a},NdzV:function(t,e,n){},Tvau:function(t,e,n){"use strict";var i={props:{value:{required:!0},disabled:{type:Boolean,default:!1},options:{type:Array,default:function(){return[]},required:!0},placeholder:{type:String}},model:{prop:"value"},data:function(){return{selectId:this.value}},watch:{value:function(t){this.selectId=t}},methods:{changeFn:function(){this.$emit("input",this.selectId)},handleSelect:function(t){t.target.parentElement.previousElementSibling.children[0].children[1].click(),this.$refs.cascader.dropDownVisible=!1}}},o=(n("iGDy"),n("KHd+")),r=Object(o.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-cascader",{ref:"cascader",attrs:{disabled:t.disabled,placeholder:t.placeholder,props:{children:"childs",label:"title",value:"id",checkStrictly:!0,expandTrigger:"hover",emitPath:!1},options:t.options,"show-all-levels":!1,clearable:""},on:{change:t.changeFn},scopedSlots:t._u([{key:"default",fn:function(e){e.node;var i=e.data;return[n("div",{staticClass:"select-item",domProps:{innerHTML:t._s(i.title)},on:{click:t.handleSelect}})]}}]),model:{value:t.selectId,callback:function(e){t.selectId=e},expression:"selectId"}})},[],!1,null,null,null);r.options.__file="index.vue";e.a=r.exports},cci0:function(t,e,n){"use strict";n.r(e);var i=n("14Xm"),o=n.n(i),r=n("D3Ub"),a=n.n(r),l=n("5qhT"),s=n("Tvau"),c=n("U/5H"),u=n.n(c),d={components:{VSelect:s.a},props:{},data:function(){return{dialogVisible:!1,listLoading:!1,tableData:[],options:[],form:{},id:this.$route.params.id,sortable:null,oldList:[],newList:[]}},watch:{},computed:{},methods:{getList:function(){var t=this;return a()(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.listLoading=!0,e.next=3,Object(l.e)({id:t.id});case 3:n=e.sent,t.tableData=n.data||[],t.options=n.data||[],t.listLoading=!1,t.recursive(t.tableData),t.newList=t.oldList.slice(),t.$nextTick(function(){});case 10:case"end":return e.stop()}},e,t)}))()},recursive:function(t){var e=this;t.forEach(function(t){e.oldList.push(t.assist_id),t.childs&&e.recursive(t.childs)})},setSort:function(){var t=this,e=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];this.sortable=u.a.create(e,{ghostClass:"sortable-ghost",setData:function(t){console.log(t),t.setData("Text","")},onEnd:function(e){console.log(e.oldIndex);var n=t.oldList.splice(e.oldIndex,1)[0];console.log(n);var i=t.newList.splice(e.oldIndex,1)[0];console.log(i)}})},handleRemove:function(t){var e=this,n=this;void 0!==t.childs||t.childs?this.$message({type:"warning",message:"警告哦，该"+t.title+"类别还有子类别因此不能删除!"}):this.$confirm("此操作将永久删除"+t.title+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(a()(o.a.mark(function i(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.j)(t.id);case 2:n.getList(),n.$message({type:"success",message:"删除成功!"});case 4:case"end":return e.stop()}},i,e)}))).catch(function(){n.$message({type:"info",message:"已取消删除"})})},handleEdit:function(t){var e=this;return a()(o.a.mark(function n(){var i,r;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i={scheme:1},n.next=3,Object(l.g)(i,t.id);case 3:r=n.sent,e.form=r.data,"root"===e.form.pid&&(e.form.pid=""),e.dialogVisible=!0;case 7:case"end":return n.stop()}},n,e)}))()},save:function(){var t=this;this.$refs.form.validate(function(){var e=a()(o.a.mark(function e(n){var i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return i={book_id:t.id||"",id:t.form.id,pid:t.form.pid,title:t.form.title,label:t.form.label},e.next=4,Object(l.d)(i);case 4:t.getList(),t.dialogVisible=!1,t.$message({type:"success",message:"添加成功!"});case 7:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}())},handleContent:function(t){this.$router.push({name:"ContentBooksContent",params:{id:t.id}})},empty:function(){this.form={}}},created:function(){this.getList()},mounted:function(){}},f=(n("EiWX"),n("9ckS"),n("KHd+")),p=Object(f.a)(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"head-container"},[n("div",{staticClass:"left-wrapper"}),t._v(" "),n("div",{staticClass:"right-wrapper"},[n("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("添加章节")])],1)]),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"dragTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",fit:"","highlight-current-row":"","header-cell-style":{background:"#f5f7fa"},"row-key":"assist_id","tree-props":{children:"childs",hasChildren:"hasChildren"}}},[n("el-table-column",{attrs:{prop:"id",label:"id"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"title"}}),t._v(" "),n("el-table-column",{attrs:{prop:"label",label:"label"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){t.handleContent(e.row)}}},[t._v("正文")]),t._v(" "),n("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(n){t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleRemove(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-dialog",{attrs:{title:"章节",visible:t.dialogVisible,width:"20%"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.empty}},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"4em"}},[t.form.id?n("el-form-item",{attrs:{label:"id"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}})],1):t._e(),t._v(" "),n("el-form-item",{attrs:{label:"title",prop:"title",rules:[{required:!0}]}},[n("el-input",{attrs:{placeholder:"请输入title"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"label",prop:"label"}},[n("el-input",{attrs:{placeholder:"请输入label"},model:{value:t.form.label,callback:function(e){t.$set(t.form,"label",e)},expression:"form.label"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"pid",prop:"pid"}},[n("v-select",{attrs:{options:t.options},model:{value:t.form.pid,callback:function(e){t.$set(t.form,"pid",e)},expression:"form.pid"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},[],!1,null,"f391be68",null);p.options.__file="chapter.vue";e.default=p.exports},doI3:function(t,e,n){},iGDy:function(t,e,n){"use strict";var i=n("1D2j");n.n(i).a}}]);